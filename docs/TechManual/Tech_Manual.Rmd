---
title: "North Atlantic Swordfish MSE Technical Manual"
author: "Adrian Hordyk <adrian@bluematterscience.com>"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output:
  rmdformats::robobook:
    highlight: kate
    toc_depth: 2
    use_bookdown: yes
  pdf_document:
    toc: yes
header-includes:
- \usepackage{lineno}
- \linenumbers
urlcolor: blue
bibliography: "`r rbbt::bbt_write_bib('biblio.json', overwrite = TRUE)`"
csl: fish-and-fisheries.csl
always_allow_html: true
---

```{css, echo=FALSE}
.csl-entry {
    margin-bottom: 12px;
}
```

```{r, include=FALSE}
library(SWOMSE)
knitr::opts_chunk$set(echo=FALSE)
```

# Introduction
This document provides technical details for the management strategy evaluation (MSE) for the North Atlantic swordfish fishery (hereafter swordfish).

A description of the specifications for the MSE is available in [MSE Trial Specs](https://iccat.github.io/nswo-mse/TS/Trial_Specs.html). Other material relating to the operating models (OMs) and MSE is available on the [Swordfish MSE homepage](https://iccat.github.io/nswo-mse/).  

# Required Software

## R Software Environment 
The swordfish MSE is being conducted with the free and open-source [R software environment](https://www.r-project.org/). This manual assumes readers are familiar with the R programming language.

## SWOMSE R Package
The MSE code is packaged into an R package called `SWOMSE`, stored in the [ICCAT/nswo-mse GitHub Repository](https://github.com/ICCAT/nswo-mse). The ICCAT/nswo-mse GitHub Repository is currently private and only available to members of the Group. Please contact [Adrian Hordyk](mailto:adrian@bluematterscience.com) or [Ai Kimoto](mailto:ai.kimoto@iccat.int) if you do not have access. 

### Installing the Package
The `SWOMSE` package can be installed directly from the [GitHub repository](https://github.com/ICCAT/nswo-mse) using the `devtool` package:

```{r, eval=FALSE, echo=TRUE}
# install.packages("devtools")
devtools::install_github("ICCAT/nswo-mse", 
                         auth_token='your_personal_access_token')
```

Note that as this repository is private, you will need to provide a personal access token to download and install from GitHub. See [here](https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token) for information on creating a personal access token.

Alternatively, the [ICCAT/nswo-mse GitHub Repository](https://github.com/ICCAT/nswo-mse) can be cloned and the package can be installed locally using [RStudio](https://www.rstudio.com/).

### SWOMSE Contents
The `SWOMSE` package contains the swordfish operating models and the data used to condition the operating models. 

Candidate management procedures (cMPs) and performance metrics (PMs) for the swordfish MSE will be added to the package when they are developed. 


## openMSE R Package
The `SWOMSE` package uses the `openMSE` package as a key dependency. `openMSE` will be automatically installed when the `SWOMSE` package is installed.

`openMSE` is an umbrella R package for:

* [`MSEtool`](https://cran.r-project.org/package=MSEtool): an R package developed for conducting fast, flexible, and transparent, MSE for a wide range of fisheries;
* [`DLMtool`](https://cran.r-project.org/package=DLMtool): an R package containing 100+ data-limited management procedures;
* [`SAMtool`](https://cran.r-project.org/package=SAMtool): an R package containing data-moderate and data-rich stock assessments and operating model conditioning functions.

All functions related to importing operating models, simulating the historical fishery dynamics, and projecting the fishery forward in time with different modes of management are located in the `MSEtool` package, and are available to the user when the `SWOMSE` package is loaded. 

A non-technical description of `openMSE` and its key features is available on the [`openMSE` website](https://openmse.com/). The operating model in `MSEtool`, including assumptions and equations, is described in detail in @carruthersDataLimitedMethodsToolkit2018a.

# Operating Model Conditioning
The operating models used in the MSE were developed from the base case assessment model [@anon.Report2017ICCAT2017] with several modifications. See the [Trial Specs Doc](https://iccat.github.io/nswo-mse/TS/Trial_Specs.html) for more information.

The operating models were conditioned using Stock Synthesis 3 [SS3, @methotStockSynthesisBiological2013]. At this time the swordfish operating models are being re-conditioned due to some changes in the structure of the uncertainty grid and modifications to the base case assessment model.

# Importing Operating Models
The SS3 operating models are imported into the `SWOMSE` package using `MSEtool::SS2OM` (this notation means the `SS2OM` function from the `MSEtool` package).

An operating model contains

# Overview of OM Object


# Reconstructing Fishery Dynamics

# Comparision of MSE OMs with SS3 OMs



# Calculating Reference Points

# Simulating Future Indices



# Applying Management Procedures

# Calculating Performance

# References





